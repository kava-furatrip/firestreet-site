<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <title>Firestreet — благоустройство территорий в Орске</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="description" content="Firestreet — профессиональная уборка участков, ландшафтный дизайн и украшение домов гирляндами в Орске и восточном Оренбуржье." />

  <!-- Шрифты -->
  <style>
    @font-face {
      font-family: "Intro";
      src: url("Fonts/Intro-Regular.otf") format("opentype");
      font-weight: 400;
      font-style: normal;
    }

    @font-face {
      font-family: "Intro-regular";
      src: url("Fonts/Intro-Regular.otf") format("opentype");
      font-weight: 400;
      font-style: normal;
    }

    :root {
      --bg-main: #020c02;
      --bg-card: rgba(10, 28, 10, 0.96);
      --bg-card-soft: rgba(15, 40, 15, 0.85);
      --accent: #9bff55;
      --accent-soft: rgba(155, 255, 85, 0.16);
      --accent-dark: #5fb428;
      --text-main: #f5ffe9;
      --text-muted: #a2b89a;
      --border-soft: rgba(255, 255, 255, 0.06);
      --shadow-soft: 0 18px 45px rgba(0, 0, 0, 0.6);
      --radius-xl: 32px;
      --radius-lg: 24px;
      --radius-md: 16px;
      --radius-pill: 999px;
    }

    * {
      box-sizing: border-box;
    }

    body {
      margin: 0;
      min-height: 100vh;
      font-family: "Intro-regular", system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      background: radial-gradient(circle at top left, #153818 0, #020c02 55%, #000 100%);
      color: var(--text-main);
      -webkit-font-smoothing: antialiased;
    }

    a {
      color: inherit;
      text-decoration: none;
    }

    img {
      max-width: 100%;
      display: block;
    }

    .page {
      max-width: 1280px;
      margin: 0 auto;
      padding: 20px 20px 80px;
    }

    @media (min-width: 1200px) {
      .page {
        padding-inline: 32px;
      }
    }

    /* HEADER */

    header {
      position: sticky;
      top: 0;
      z-index: 40;
      background: linear-gradient(to bottom, rgba(2, 12, 2, 0.98), rgba(2, 12, 2, 0.92), transparent);
      backdrop-filter: blur(16px);
    }

    .header-inner {
      max-width: 1280px;
      margin: 0 auto;
      padding: 14px 20px 12px;
      display: flex;
      align-items: center;
      gap: 20px;
    }

    @media (min-width: 1200px) {
      .header-inner {
        padding-inline: 32px;
      }
    }

    .logo-wrap {
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .logo-img {
      width: 46px;
      height: 46px;
      border-radius: 12px;
      background: radial-gradient(circle at 30% 20%, #eaffc5 0, #9bff55 40%, #325217 100%);
      padding: 4px;
      box-shadow: 0 0 0 1px rgba(0, 0, 0, 0.35);
    }

    .logo-text-main {
      font-family: "Intro";
      font-size: 20px;
      letter-spacing: 0.04em;
    }

    .logo-text-sub {
      font-size: 11px;
      color: var(--text-muted);
      margin-top: 2px;
    }

    nav {
      margin-left: auto;
      display: flex;
      align-items: center;
      gap: 18px;
      font-size: 13px;
      color: var(--text-muted);
    }

    nav a {
      position: relative;
      padding-block: 4px;
    }

    nav a::after {
      content: "";
      position: absolute;
      left: 0;
      bottom: -2px;
      width: 0;
      height: 2px;
      border-radius: 999px;
      background: linear-gradient(90deg, var(--accent) 0, #c6ff8b 100%);
      transition: width 0.18s ease-out;
    }

    nav a:hover::after {
      width: 100%;
    }

    .header-cta {
      margin-left: 8px;
      padding: 9px 18px;
      border-radius: var(--radius-pill);
      border: 1px solid rgba(155, 255, 85, 0.4);
      background: radial-gradient(circle at top left, rgba(155, 255, 85, 0.24), rgba(4, 19, 4, 0.9));
      color: #101a08;
      font-size: 12px;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 0.05em;
      box-shadow: 0 10px 24px rgba(0, 0, 0, 0.6);
      cursor: pointer;
      display: inline-flex;
      align-items: center;
      gap: 8px;
      white-space: nowrap;
    }

    .header-cta span {
      color: #f7ffe9;
    }

    .header-cta:hover {
      transform: translateY(-1px);
      box-shadow: 0 16px 32px rgba(0, 0, 0, 0.75);
    }

    @media (max-width: 840px) {
      nav a {
        display: none;
      }
      .header-cta {
        margin-left: auto;
      }
    }

    /* LAYOUT */

    .layout-main {
      max-width: 1280px;
      margin: 12px auto 0;
      padding-inline: 20px;
    }

    @media (min-width: 1200px) {
      .layout-main {
        padding-inline: 32px;
      }
    }

    .sections {
      display: grid;
      grid-template-columns: minmax(0, 2.2fr) minmax(0, 1.6fr);
      gap: 20px;
      align-items: flex-start;
    }

    @media (max-width: 980px) {
      .sections {
        grid-template-columns: minmax(0, 1fr);
      }
    }

    /* HERO */

    .hero-card {
      background: radial-gradient(circle at top left, rgba(30, 70, 30, 0.9), var(--bg-card));
      border-radius: var(--radius-xl);
      padding: 26px 26px 26px;
      box-shadow: var(--shadow-soft);
      border: 1px solid var(--border-soft);
      position: relative;
      overflow: hidden;
    }

    @media (min-width: 1040px) {
      .hero-card {
        padding: 30px 32px 30px;
      }
    }

    .badge-row {
      display: inline-flex;
      align-items: center;
      gap: 8px;
      padding: 4px 10px;
      border-radius: var(--radius-pill);
      background: rgba(0, 0, 0, 0.44);
      border: 1px solid rgba(255, 255, 255, 0.06);
      color: var(--text-muted);
      font-size: 11px;
      margin-bottom: 14px;
    }

    .badge-dot {
      width: 8px;
      height: 8px;
      border-radius: 999px;
      background: radial-gradient(circle at 30% 20%, #eaffc5 0, #9bff55 40%, #2f5e14 100%);
      box-shadow: 0 0 10px rgba(155, 255, 85, 0.8);
    }

    .hero-title {
      font-family: "Intro";
      font-size: clamp(26px, 3.2vw, 32px);
      line-height: 1.1;
      margin: 0 0 14px;
    }

    .hero-text {
      font-size: 14px;
      color: var(--text-muted);
      margin: 0 0 18px;
      max-width: 640px;
    }

    .hero-bullets {
      list-style: none;
      padding: 0;
      margin: 0 0 18px;
      display: grid;
      gap: 6px;
      font-size: 13px;
      color: #dae7d2;
    }

    .hero-bullets li::before {
      content: "•";
      color: var(--accent);
      margin-right: 8px;
    }

    .hero-buttons {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
      margin-bottom: 10px;
    }

    .btn-main {
      padding: 11px 22px;
      border-radius: var(--radius-pill);
      border: none;
      background: radial-gradient(circle at top left, var(--accent), #c8ff93);
      color: #141b0a;
      font-size: 13px;
      font-weight: 700;
      text-transform: uppercase;
      letter-spacing: 0.06em;
      cursor: pointer;
      box-shadow: 0 16px 32px rgba(0, 0, 0, 0.8);
      display: inline-flex;
      align-items: center;
      gap: 8px;
    }

    .btn-main:hover {
      transform: translateY(-1px);
    }

    .btn-ghost {
      padding: 10px 18px;
      border-radius: var(--radius-pill);
      border: 1px solid rgba(255, 255, 255, 0.2);
      background: rgba(0, 0, 0, 0.4);
      color: var(--text-main);
      font-size: 13px;
      cursor: pointer;
      display: inline-flex;
      align-items: center;
      gap: 8px;
    }

    .btn-ghost span {
      color: var(--accent);
      font-weight: 600;
    }

    .hero-subtitle {
      font-size: 12px;
      color: var(--text-muted);
      margin-top: 4px;
    }

    .hero-bottom-row {
      display: flex;
      flex-wrap: wrap;
      gap: 14px;
      margin-top: 18px;
      font-size: 12px;
      color: var(--text-muted);
      align-items: center;
    }

    .hero-phones {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
    }

    .phone-pill {
      padding: 6px 12px;
      border-radius: var(--radius-pill);
      border: 1px solid rgba(255, 255, 255, 0.16);
      background: rgba(0, 0, 0, 0.3);
      color: #f5ffe9;
      font-size: 12px;
      display: inline-flex;
      align-items: center;
      gap: 8px;
    }

    .phone-pill strong {
      font-weight: 600;
    }

    /* SERVICES / FORM */

    .side-column {
      display: flex;
      flex-direction: column;
      gap: 16px;
    }

    .card {
      background: var(--bg-card-soft);
      border-radius: var(--radius-xl);
      padding: 20px 20px 18px;
      border: 1px solid var(--border-soft);
      box-shadow: var(--shadow-soft);
    }

    .card-title {
      font-family: "Intro";
      font-size: 16px;
      margin: 0 0 10px;
    }

    .card-subtitle {
      font-size: 12px;
      color: var(--text-muted);
      margin-bottom: 14px;
    }

    .services-list {
      list-style: none;
      padding: 0;
      margin: 0 0 8px;
      display: grid;
      gap: 6px;
      font-size: 13px;
      color: #e4f2da;
    }

    .services-list li::before {
      content: "—";
      opacity: 0.75;
      margin-right: 6px;
    }

    .form {
      display: grid;
      gap: 10px;
      margin-top: 4px;
    }

    .field-label {
      font-size: 11px;
      color: var(--text-muted);
      margin-bottom: 4px;
    }

    .field {
      background: rgba(0, 0, 0, 0.45);
      border-radius: var(--radius-md);
      border: 1px solid rgba(255, 255, 255, 0.12);
      padding: 9px 11px;
      font-size: 13px;
      color: var(--text-main);
      outline: none;
      width: 100%;
    }

    .field::placeholder {
      color: rgba(200, 220, 200, 0.5);
    }

    .field:focus {
      border-color: var(--accent);
      box-shadow: 0 0 0 1px rgba(155, 255, 85, 0.4);
    }

    textarea.field {
      min-height: 70px;
      resize: vertical;
    }

    .form-footnote {
      font-size: 10px;
      color: var(--text-muted);
    }

    /* PORTFOLIO */

    section {
      margin-top: 28px;
    }

    .section-header {
      display: flex;
      justify-content: space-between;
      align-items: baseline;
      gap: 16px;
      margin-bottom: 14px;
    }

    .section-title {
      font-family: "Intro";
      font-size: 18px;
      margin: 0;
    }

    .section-description {
      font-size: 12px;
      color: var(--text-muted);
      max-width: 520px;
    }

    .portfolio-grid {
      display: grid;
      grid-template-columns: repeat(3, minmax(0, 1fr));
      gap: 14px;
    }

    @media (max-width: 980px) {
      .portfolio-grid {
        grid-template-columns: repeat(2, minmax(0, 1fr));
      }
    }

    @media (max-width: 640px) {
      .portfolio-grid {
        grid-template-columns: minmax(0, 1fr);
      }
    }

    .portfolio-card {
      background: rgba(5, 20, 5, 0.96);
      border-radius: var(--radius-lg);
      border: 1px solid var(--border-soft);
      padding: 10px 10px 12px;
      box-shadow: 0 14px 36px rgba(0, 0, 0, 0.7);
      display: flex;
      flex-direction: column;
      gap: 8px;
    }

    .portfolio-card-title {
      font-size: 13px;
      font-weight: 600;
      margin: 0 0 2px;
    }

    .portfolio-card-desc {
      font-size: 11px;
      color: var(--text-muted);
      margin: 0 0 4px;
    }

    .portfolio-images {
      display: grid;
      grid-template-columns: repeat(2, minmax(0, 1fr));
      gap: 6px;
    }

    .portfolio-images figure {
      margin: 0;
      border-radius: 14px;
      overflow: hidden;
      position: relative;
      background: #0a1508;
    }

    .portfolio-images img {
      width: 100%;
      height: 140px;
      object-fit: cover;
      display: block;
      filter: saturate(1.1);
    }

    .portfolio-images figcaption {
      position: absolute;
      left: 8px;
      bottom: 8px;
      padding: 2px 8px;
      border-radius: 999px;
      font-size: 10px;
      text-transform: uppercase;
      letter-spacing: 0.08em;
      background: rgba(0, 0, 0, 0.7);
      color: #f5ffe9;
      border: 1px solid rgba(255, 255, 255, 0.22);
    }

    /* VIDEO */

    .video-grid {
      display: grid;
      grid-template-columns: repeat(3, minmax(0, 1fr));
      gap: 14px;
    }

    @media (max-width: 980px) {
      .video-grid {
        grid-template-columns: repeat(2, minmax(0, 1fr));
      }
    }

    @media (max-width: 640px) {
      .video-grid {
        grid-template-columns: minmax(0, 1fr);
      }
    }

    .video-card {
      background: rgba(5, 20, 5, 0.96);
      border-radius: var(--radius-lg);
      border: 1px solid var(--border-soft);
      padding: 10px 10px 12px;
      box-shadow: 0 14px 36px rgba(0, 0, 0, 0.7);
      display: flex;
      flex-direction: column;
      gap: 8px;
    }

    .video-card-title {
      font-size: 13px;
      font-weight: 600;
      margin: 0 0 2px;
    }

    .video-card-desc {
      font-size: 11px;
      color: var(--text-muted);
      margin: 0 0 4px;
    }

    .video-embed,
    .video-card video {
      width: 100%;
      border-radius: 14px;
      overflow: hidden;
      background: #000;
    }

    .video-card video {
      height: 180px;
      object-fit: cover;
    }

    .video-embed iframe {
      width: 100%;
      height: 180px;
      border: 0;
      display: block;
    }

    /* FOOTER */

    footer {
      margin-top: 32px;
      border-top: 1px solid rgba(255, 255, 255, 0.06);
      padding-top: 16px;
      font-size: 11px;
      color: var(--text-muted);
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
      justify-content: space-between;
      align-items: center;
    }

    .made-by {
      opacity: 0.7;
    }

    .made-by a {
      color: var(--accent);
    }
  </style>
</head>

<body>
  <header>
    <div class="header-inner">
      <div class="logo-wrap">
        <div class="logo-img">
          <img src="Images/logo.png" alt="Firestreet" />
        </div>
        <div>
          <div class="logo-text-main">Firestreet</div>
          <div class="logo-text-sub">Орск и восточное Оренбуржье</div>
        </div>
      </div>

      <nav>
        <a href="#services">Услуги</a>
        <a href="#portfolio">До / после</a>
        <a href="#video">Видео</a>
        <a href="#contact">Заявка</a>
      </nav>

      <button class="header-cta" type="button" onclick="document.getElementById('contact').scrollIntoView({behavior:'smooth'})">
        <span>Бесплатная консультация и выезд</span>
      </button>
    </div>
  </header>

  <main class="layout-main">
    <div class="sections">
      <!-- HERO -->
      <section class="hero-card" id="home">
        <div class="badge-row">
          <span class="badge-dot"></span>
          <span id="hero-badge">Орск и восточное Оренбуржье</span>
        </div>

        <h1 class="hero-title" id="hero-title">
          Firestreet — благоустройство территорий под ключ
        </h1>

        <p class="hero-text" id="hero-description">
          Профессиональная уборка участков, ландшафтный дизайн и украшение домов гирляндами. Мы берём на себя всю
          тяжёлую работу, чтобы вы просто смотрели на свой участок и улыбались.
        </p>

        <ul class="hero-bullets" id="hero-bullets">
          <li>Бесплатный выезд и консультация</li>
          <li>Индивидуальный расчёт стоимости под задачу</li>
          <li>Фото «до/после» на каждом объекте</li>
        </ul>

        <div class="hero-buttons">
          <button class="btn-main" type="button" id="hero-cta-primary">
            Оставить заявку
          </button>
          <button class="btn-ghost" type="button" id="hero-cta-secondary">
            <span>Позвонить</span>
            <span>+7 (915) 000-00-56</span>
          </button>
        </div>

        <p class="hero-subtitle" id="hero-subtitle">
          Частные дома, коттеджи, территории бизнеса, стройплощадки — порядок наведём везде.
        </p>

        <div class="hero-bottom-row">
          <div>Звоните напрямую:</div>
          <div class="hero-phones" id="phones-list">
            <a class="phone-pill" href="tel:+79150000056"><strong>+7 (915) 000-00-56</strong></a>
            <a class="phone-pill" href="tel:+79850000056"><strong>+7 (985) 000-00-56</strong></a>
          </div>
          <div id="footer-note" style="opacity:0.7;">Ваши желания — прежде всего!</div>
        </div>
      </section>

      <!-- SERVICES + FORM -->
      <aside class="side-column">
        <section class="card" id="services">
          <h2 class="card-title" id="services-title">Чем мы занимаемся</h2>
          <p class="card-subtitle">
            Уборка территории после стройки и сезона, спил деревьев, подготовка участка и украшение гирляндами.
          </p>

          <ul class="services-list" id="services-list">
            <li>Уборка территории</li>
            <li>Спил и обрезка деревьев</li>
            <li>Покос травы и сорняка</li>
            <li>Подготовка участка под строительство</li>
            <li>Вывоз мусора и демонтаж</li>
            <li>Украшение домов и площадок гирляндами</li>
            <li>Разнорабочие на смену</li>
            <li>Измельчитель веток</li>
          </ul>
        </section>

        <section class="card" id="contact">
          <h2 class="card-title">Заявка в WhatsApp</h2>
          <p class="card-subtitle">
            Напишите, что нужно сделать, и мы вернёмся с вопросами и примерной сметой.
          </p>

          <form class="form" id="order-form">
            <div>
              <div class="field-label">Имя</div>
              <input class="field" type="text" name="name" placeholder="Как к вам обращаться?" />
            </div>

            <div>
              <div class="field-label">Телефон</div>
              <input class="field" type="tel" name="phone" placeholder="+7" />
            </div>

            <div>
              <div class="field-label">Услуга</div>
              <select class="field" name="service">
                <option value="Не выбрано">Выберите услугу</option>
                <option>Уборка территории</option>
                <option>Спил / обрезка деревьев</option>
                <option>Покос травы и сорняка</option>
                <option>Подготовка участка под строительство</option>
                <option>Вывоз мусора и демонтаж</option>
                <option>Украшение гирляндами</option>
                <option>Разнорабочие / смена</option>
                <option>Измельчитель веток</option>
                <option>Другое</option>
              </select>
            </div>

            <div>
              <div class="field-label">Комментарий</div>
              <textarea class="field" name="message" placeholder="Опишите задачу, сроки, адрес..."></textarea>
            </div>

            <button class="btn-main" type="submit" style="margin-top: 4px;">
              Отправить в WhatsApp
            </button>

            <p class="form-footnote">
              Нажимая кнопку, вы соглашаетесь на обработку персональных данных. Номер будет использован только для связи по заявке.
            </p>
          </form>
        </section>
      </aside>
    </div>

    <!-- PORTFOLIO -->
    <section id="portfolio">
      <div class="section-header">
        <h2 class="section-title" id="portfolio-title">Наши работы: до и после</h2>
        <p class="section-description" id="portfolio-desc">
          Живые примеры с объектов. Все фотографии — реальные участки, с которыми работала команда Firestreet.
        </p>
      </div>

      <div class="portfolio-grid" id="portfolio-items">
        <!-- Карточки портфолио будут подставлены из content/portfolio.json -->
      </div>
    </section>

    <!-- VIDEO -->
    <section id="video">
      <div class="section-header">
        <h2 class="section-title" id="video-title">Видео с объектов</h2>
        <p class="section-description" id="video-desc">
          Короткие ролики, чтобы увидеть, как участок меняется до неузнаваемости.
        </p>
      </div>

      <div class="video-grid" id="video-items">
        <!-- Видео подставятся из content/videos.json -->
      </div>
    </section>

    <footer>
      <div>© <span id="footer-year"></span> Firestreet. Все права соблюдены, порядок наведен.</div>
      <div class="made-by">
        Сайт сделан <a href="https://t.me/kava_create" target="_blank" rel="noopener">Kava.create</a>
      </div>
    </footer>
  </main>

  <!-- JS: загрузка JSON + форма WhatsApp -->
  <script>
    function $(selector) {
      return document.querySelector(selector);
    }

    async function loadJSON(url) {
      const res = await fetch(url + "?v=" + Date.now());
      if (!res.ok) {
        throw new Error("Не удалось загрузить " + url);
      }
      return res.json();
    }

    document.addEventListener("DOMContentLoaded", async function () {
      document.getElementById("footer-year").textContent = new Date().getFullYear();

      /* --- HOME --- */
      try {
        const home = await loadJSON("content/home.json");

        const badgeEl = $("#hero-badge");
        if (badgeEl && home.badge) badgeEl.textContent = home.badge;

        const titleEl = $("#hero-title");
        if (titleEl && home.title) titleEl.textContent = home.title;

        const descEl = $("#hero-description");
        if (descEl && home.description) descEl.textContent = home.description;

        const bulletsEl = $("#hero-bullets");
        if (bulletsEl && Array.isArray(home.bullets)) {
          bulletsEl.innerHTML = "";
          home.bullets.forEach(function (text) {
            const li = document.createElement("li");
            li.textContent = text;
            bulletsEl.appendChild(li);
          });
        }

        const ctaPrimary = $("#hero-cta-primary");
        if (ctaPrimary && home.cta_primary) {
          ctaPrimary.textContent = home.cta_primary;
          ctaPrimary.addEventListener("click", function () {
            document.getElementById("contact").scrollIntoView({ behavior: "smooth" });
          });
        }

        const ctaSecondary = $("#hero-cta-secondary");
        if (ctaSecondary && home.cta_secondary) {
          ctaSecondary.innerHTML = "";
          const span1 = document.createElement("span");
          span1.textContent = "Позвонить";
          const span2 = document.createElement("span");
          span2.textContent = home.cta_secondary.replace("Позвонить:", "").trim();
          ctaSecondary.appendChild(span1);
          ctaSecondary.appendChild(span2);
          ctaSecondary.addEventListener("click", function () {
            const phone = (home.phones && home.phones[0]) || "";
            if (phone) {
              window.location.href = "tel:" + phone.replace(/[^\d+]/g, "");
            }
          });
        }

        const subtitleEl = $("#hero-subtitle");
        if (subtitleEl && home.subtitle) subtitleEl.textContent = home.subtitle;

        const servicesTitleEl = $("#services-title");
        if (servicesTitleEl && home.services_title) servicesTitleEl.textContent = home.services_title;

        const servicesListEl = $("#services-list");
        if (servicesListEl && Array.isArray(home.services)) {
          servicesListEl.innerHTML = "";
          home.services.forEach(function (text) {
            const li = document.createElement("li");
            li.textContent = text;
            servicesListEl.appendChild(li);
          });
        }

        const phonesListEl = $("#phones-list");
        if (phonesListEl && Array.isArray(home.phones)) {
          phonesListEl.innerHTML = "";
          home.phones.forEach(function (phone) {
            const a = document.createElement("a");
            a.className = "phone-pill";
            a.href = "tel:" + phone.replace(/[^\d+]/g, "");
            const strong = document.createElement("strong");
            strong.textContent = phone;
            a.appendChild(strong);
            phonesListEl.appendChild(a);
          });
        }

        const footerNoteEl = $("#footer-note");
        if (footerNoteEl && home.footer_note) footerNoteEl.textContent = home.footer_note;

        // сохраним номер для WhatsApp формы
        window.FIRESTREET_WHATSAPP = home.whatsapp_number || (home.phones && home.phones[0]) || "";
      } catch (err) {
        console.error(err);
      }

      /* --- PORTFOLIO --- */
      try {
        const portfolio = await loadJSON("content/portfolio.json");

        const pt = $("#portfolio-title");
        if (pt && portfolio.title) pt.textContent = portfolio.title;

        const pd = $("#portfolio-desc");
        if (pd && portfolio.description) pd.textContent = portfolio.description;

        const container = $("#portfolio-items");
        if (container && Array.isArray(portfolio.items)) {
          container.innerHTML = "";
          portfolio.items.forEach(function (item) {
            const card = document.createElement("article");
            card.className = "portfolio-card";

            if (item.title) {
              const h = document.createElement("h3");
              h.className = "portfolio-card-title";
              h.textContent = item.title;
              card.appendChild(h);
            }

            if (item.description) {
              const p = document.createElement("p");
              p.className = "portfolio-card-desc";
              p.textContent = item.description;
              card.appendChild(p);
            }

            const imagesWrap = document.createElement("div");
            imagesWrap.className = "portfolio-images";

            const figBefore = document.createElement("figure");
            const imgBefore = document.createElement("img");
            imgBefore.src = item.before || "";
            imgBefore.alt = (item.title || "") + " — до";
            figBefore.appendChild(imgBefore);
            const capBefore = document.createElement("figcaption");
            capBefore.textContent = "До";
            figBefore.appendChild(capBefore);

            const figAfter = document.createElement("figure");
            const imgAfter = document.createElement("img");
            imgAfter.src = item.after || "";
            imgAfter.alt = (item.title || "") + " — после";
            figAfter.appendChild(imgAfter);
            const capAfter = document.createElement("figcaption");
            capAfter.textContent = "После";
            figAfter.appendChild(capAfter);

            imagesWrap.appendChild(figBefore);
            imagesWrap.appendChild(figAfter);
            card.appendChild(imagesWrap);

            container.appendChild(card);
          });
        }
      } catch (err) {
        console.error(err);
      }

      /* --- VIDEOS --- */
      try {
        const videos = await loadJSON("content/videos.json");

        const vt = $("#video-title");
        if (vt && videos.title) vt.textContent = videos.title;

        const vd = $("#video-desc");
        if (vd && videos.description) vd.textContent = videos.description;

        const container = $("#video-items");
        if (container && Array.isArray(videos.items)) {
          container.innerHTML = "";
          videos.items.forEach(function (item) {
            const card = document.createElement("article");
            card.className = "video-card";

            if (item.title) {
              const h = document.createElement("h3");
              h.className = "video-card-title";
              h.textContent = item.title;
              card.appendChild(h);
            }

            if (item.description) {
              const p = document.createElement("p");
              p.className = "video-card-desc";
              p.textContent = item.description;
              card.appendChild(p);
            }

            const src = item.file || item.url || item.src || "";
            if (src) {
              if (src.includes("youtube.com") || src.includes("youtu.be")) {
                const embedWrap = document.createElement("div");
                embedWrap.className = "video-embed";

                let videoId = "";
                try {
                  if (src.includes("youtube.com")) {
                    var urlObj = new URL(src);
                    videoId = urlObj.searchParams.get("v") || "";
                  } else {
                    videoId = src.split("/").pop();
                  }
                } catch (e) {
                  videoId = "";
                }

                if (videoId) {
                  const iframe = document.createElement("iframe");
                  iframe.src = "https://www.youtube.com/embed/" + videoId;
                  iframe.loading = "lazy";
                  iframe.allowFullscreen = true;
                  embedWrap.appendChild(iframe);
                  card.appendChild(embedWrap);
                }
              } else {
                const videoEl = document.createElement("video");
                videoEl.src = src;
                videoEl.controls = true;
                videoEl.preload = "metadata";
                card.appendChild(videoEl);
              }
            }

            container.appendChild(card);
          });
        }
      } catch (err) {
        console.error(err);
      }

      /* --- ФОРМА в WhatsApp --- */
      const form = document.getElementById("order-form");
      if (form) {
        form.addEventListener("submit", function (e) {
          e.preventDefault();

          var data = {
            name: form.querySelector('input[name="name"]').value.trim(),
            phone: form.querySelector('input[name="phone"]').value.trim(),
            service: form.querySelector('select[name="service"]').value,
            message: form.querySelector('textarea[name="message"]').value.trim(),
          };

          var lines = [
            "Новая заявка с сайта Firestreet:",
            "",
            "Имя: " + (data.name || "-"),
            "Телефон: " + (data.phone || "-"),
            "Услуга: " + (data.service || "-"),
            "",
            "Комментарий:",
            data.message || "-",
          ];

          var message = encodeURIComponent(lines.join("\n"));
          var phoneRaw = (window.FIRESTREET_WHATSAPP || "").replace(/[^\d+]/g, "");
          if (!phoneRaw) {
            phoneRaw = "+79150000056";
          }
          var phoneDigits = phoneRaw.replace(/^tel:\+?/, "");
          var waUrl = "https://wa.me/" + phoneDigits + "?text=" + message;

          window.location.href = waUrl;
          form.reset();
        });
      }
    });
  </script>

  <!-- Netlify Identity + автопереход в /admin после логина/подтверждения -->
  <script src="https://identity.netlify.com/v1/netlify-identity-widget.js"></script>
  <script>
    if (window.netlifyIdentity) {
      window.netlifyIdentity.on("init", function (user) {
        if (!user) {
          window.netlifyIdentity.on("login", function () {
            document.location.href = "/admin/";
          });
        }
      });
    }
  </script>
</body>
</html>
